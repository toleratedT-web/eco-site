{% extends "base.html" %}
{% block title %}Energy Tracker{% endblock %}

{% block content %}
    <h1>Energy Tracker</h1>
    <p>Log daily consumption, set goals, receive tips, and view progress.</p>

    <div class="row">
        <div class="col-md-6">
            <h4>Add Energy Entry</h4>
            <form method="post">
                {{ entry_form.hidden_tag() }}
                <div class="mb-3">{{ entry_form.entry_date.label }}{{ entry_form.entry_date(class='form-control') }}</div>
                <div class="mb-3">{{ entry_form.kwh.label }}{{ entry_form.kwh(class='form-control') }}</div>
                <button class="btn btn-primary" type="submit">Add Entry</button>
            </form>
        </div>

        <div class="col-md-6">
            <h4>Daily Goal</h4>
            <form method="post">
                {{ goal_form.hidden_tag() }}
                <div class="mb-3">{{ goal_form.daily_kwh_goal.label }}{{ goal_form.daily_kwh_goal(class='form-control') }}</div>
                <button class="btn btn-secondary" type="submit">Save Goal</button>
            </form>
        </div>
    </div>

    <hr>

    <h4>Latest Entries</h4>
    {% if entries %}
        <table class="table">
            <thead><tr><th>Date</th><th>kWh</th></tr></thead>
            <tbody>
                {% for e in entries %}
                    <tr><td>{{ e.entry_date.strftime('%Y-%m-%d') }}</td><td>{{ e.kwh }}</td></tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No entries yet.</p>
    {% endif %}

    <h4>Summary</h4>
    {% if weekly_avg %}
        <p>7-day average: <strong>{{ weekly_avg }} kWh</strong></p>
    {% endif %}

    <h4>Tips</h4>
    {% if tips %}
        <ul>
            {% for t in tips %}
                <li>{{ t }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No tips at the moment.</p>
    {% endif %}

{% endblock %}